<h1>队伍列表</h1>

<table>
  <thead>
    <tr>
      <th>队伍名称</th>
      <th>队长</th>
      <th>队员</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @teams.each do |team| %>
      <tr>
        <td><%= team.name %></td>
        <td><%= User.find(team.captain_id).name %></td>
        <td>
          <%if team.users.empty?-%>暂无队员加入<%else-%>
            <%team.users.each do|user|-%>
              <%= user.name %>
            <%end-%>
          <%end-%>
        </td>
        <td><%= link_to '详情', team %></td>
        <%if current_user.admin?||current_user.id==team.captain_id-%>
          <td><%= link_to '修改名称', edit_team_path(team) %></td>
          <td><%= link_to '解散', team, method: :delete, data: { confirm: '此操作不可恢复。确定？' } %></td>
        <%end-%>
        <td><%=link_to'加入',"/teams/#{team.id}/add",data: {confirm: "确定要加入队伍\"#{team.name}\"？"}-%></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to '返回用户主页', user_index_path %> |
<%= link_to '返回网站主页', root_path %> |
<%= link_to '创建队伍', new_team_path %>
